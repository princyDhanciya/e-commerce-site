<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>StyleHub - SVG Magic</title>
<link href="https://fonts.googleapis.com/css2?family=Manrope:wght@700;800&display=swap" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
<style>
*{box-sizing:border-box}
body{margin:0;font-family:'Manrope',sans-serif;background:#F5E8FF;
  background-image: repeating-linear-gradient(135deg, #D896FF 0%, #D896FF 2%, transparent 2%, transparent 8%);
  min-height:100vh; scroll-behavior:smooth; padding-top:80px;}
:root {
  --lime: #C9FF8E; --lilac: #E8D4FF; --mint: #9FFFE0; --pink: #FF9EC9;
  --black: #000; --white: #fff;
}
.container { max-width: 1400px; margin:0 auto; padding:24px; }
.sections { display:grid; grid-template-columns:repeat(auto-fit, minmax(320px,1fr)); gap:24px; margin-bottom:32px; }
@media(min-width:768px){ .sections{max-width:600px; margin:0 auto 32px auto;} }
.section { background:white; border:4px solid var(--black); border-radius:24px; padding:24px; box-shadow:0 8px 0 rgba(0,0,0,0.15); }
.home-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:24px; }
.home-header h1 { font-size:28px; font-weight:800; color:var(--black); margin:0; }
@media(min-width:768px){ .home-header h1{font-size:40px;} }
.bell { position:relative; width:32px; height:32px; cursor:pointer; }
.bell-badge { position:absolute; top:-6px; right:-6px; background:#FF3B30; color:white; border-radius:50%; width:20px; height:20px; font-size:12px; display:flex; align-items:center; justify-content:center; font-weight:700; }
.quick-cards { display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-bottom:24px; }
.quick-card { border:4px solid var(--black); border-radius:20px; padding:20px 16px; font-weight:800; font-size:16px; text-align:center; box-shadow:0 8px 0 rgba(0,0,0,0.15); cursor:pointer; transition:transform 0.2s; }
.quick-card:hover { transform:translateY(-4px); }
.quick-card.lime { background:var(--lime); }
.quick-card.lilac { background:var(--lilac); }
.section-title { font-size:20px; font-weight:800; margin:0 0 16px 0; }
@media(min-width:768px){ .section-title{font-size:24px;} }

/* NAVBAR - STICKY & RESPONSIVE */
.navbar { position:fixed; top:0; left:0; right:0; z-index:1000; background:white; border-bottom:6px solid var(--black); box-shadow:0 8px 0 rgba(0,0,0,0.15); }
.nav-inner { max-width:1400px; margin:auto; padding:12px 16px; display:flex; justify-content:space-between; align-items:center; gap:12px; }
.logo { font-size:24px; font-weight:800; white-space:nowrap; }
@media(min-width:768px){ .logo{font-size:32px;} }
.search-box { flex:1; max-width:500px; }
.search-box input { width:100%; padding:10px 16px; border:4px solid var(--black); border-radius:30px; background:var(--mint); font-weight:800; font-size:14px; }
@media(min-width:768px){ .search-box input{padding:14px 20px; font-size:16px;} }
.nav-icons { display:flex; gap:8px; }
.icon-btn { width:40px; height:40px; border:4px solid var(--black); border-radius:12px; background:var(--lilac); display:flex; align-items:center; justify-content:center; font-size:16px; position:relative; cursor:pointer; transition:transform .2s; }
@media(min-width:768px){ .icon-btn{width:48px; height:48px; font-size:20px; border-radius:16px;} }
.icon-btn:hover { transform:scale(1.1); }
.badge { position:absolute; top:-6px; right:-6px; background:#FF3B30; color:white; width:20px; height:20px; border-radius:50%; font-size:11px; font-weight:800; display:flex; align-items:center; justify-content:center; }

/* CATEGORY CARDS */
.categories { margin-top:20px; text-align:center; }
.category-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(120px,1fr)); gap:16px; margin:24px 0; }
.cat-card { border:4px solid var(--black); border-radius:20px; padding:20px 12px; background:white; box-shadow:0 8px 0 rgba(0,0,0,0.15); cursor:pointer; transition:all .3s; font-weight:800; font-size:14px; }
.cat-card:hover { transform:translateY(-8px) rotate(-2deg); box-shadow:0 16px 0 rgba(0,0,0,0.2); }
.cat-icon { width:50px; height:50px; margin:0 auto 8px; display:block; }
@media(min-width:768px){ .cat-icon{width:60px; height:60px;} .cat-card{font-size:16px;} }

/* FILTERS */
.filters { text-align:center; margin:24px 0; }
.filter-btn { padding:10px 20px; margin:4px; border:4px solid var(--black); border-radius:30px; font-weight:800; font-size:14px; cursor:pointer; transition:all .2s; background:white; }
.filter-btn.active,.filter-btn:hover { background:var(--lime); transform:translateY(-4px); box-shadow:0 8px 0 rgba(0,0,0,0.2); }

/* PRODUCT CARD - MOBILE-FRIENDLY WIDTH */
#products-grid { display:grid; grid-template-columns:1fr; gap:16px; max-width:600px; margin:0 auto; }
@media(min-width:768px){ #products-grid{max-width:1200px; grid-template-columns:1fr 1fr;} }
.product-card { border:4px solid var(--black); border-radius:20px; padding:20px; background:white; box-shadow:0 8px 0 rgba(0,0,0,0.15); position:relative; }
.product-ribbon { position:absolute; top:16px; left:-4px; background:var(--pink); color:var(--black); padding:4px 12px; font-weight:800; font-size:12px; border:4px solid var(--black); box-shadow:2px 2px 0 rgba(0,0,0,0.15); }
.product-actions { position:absolute; top:16px; right:16px; display:flex; gap:8px; }
.action-icon { width:36px; height:36px; border:3px solid var(--black); border-radius:10px; background:white; display:flex; align-items:center; justify-content:center; cursor:pointer; transition:all .2s; font-size:16px; }
.action-icon:hover { transform:scale(1.1); }
.action-icon.active { background:var(--pink); }
.product-content { display:flex; gap:16px; margin-top:30px; }
.product-img { width:120px; height:140px; border-radius:16px; border:4px solid var(--black); object-fit:cover; flex-shrink:0; }
.product-info { flex:1; }
.product-title { font-size:18px; font-weight:800; margin:0 0 6px 0; }
.product-desc { font-size:13px; color:#666; margin:0 0 10px 0; }
.product-price { display:flex; align-items:center; gap:10px; margin-bottom:12px; }
.price-old { font-size:16px; text-decoration:line-through; color:#999; }
.price-new { font-size:24px; font-weight:800; color:#FF3B30; }
.add-btn { width:40px; height:40px; background:var(--black); color:white; border:none; border-radius:10px; font-size:20px; font-weight:800; cursor:pointer; transition:transform .2s; }
.add-btn:hover { transform:scale(1.05); }

/* CART MODAL */
.modal { display:none; position:fixed; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,0.5); z-index:2000; align-items:center; justify-content:center; padding:20px; }
.modal.show { display:flex; }
.modal-content { background:white; border:4px solid var(--black); border-radius:24px; padding:24px; max-width:500px; width:100%; max-height:80vh; overflow-y:auto; box-shadow:0 16px 0 rgba(0,0,0,0.3); }
.modal-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; }
.modal-title { font-size:24px; font-weight:800; margin:0; }
.close-btn { width:36px; height:36px; border:3px solid var(--black); border-radius:10px; background:var(--pink); cursor:pointer; display:flex; align-items:center; justify-content:center; font-size:20px; font-weight:800; }
.close-btn:hover { transform:scale(1.1); }

/* CART */
.promo { display:flex; align-items:center; gap:12px; background:#E8F9F0; border:4px solid #00D66F; border-radius:20px; padding:12px 16px; margin:16px 0; font-weight:800; font-size:14px; }
.check { width:20px; height:20px; background:#00D66F; border-radius:50%;display:flex; align-items:center; justify-content:center; font-size:12px; }
.cart-product { border:4px solid var(--black); border-radius:20px; padding:16px; background:white; box-shadow:0 8px 0 rgba(0,0,0,0.15); margin-bottom:16px; display:flex; gap:16px; }
.cart-img { width:80px; height:100px; border-radius:16px; border:3px solid var(--black); object-fit:cover; }
.cart-info { flex:1; }
.cart-title { font-size:16px; font-weight:800; margin:0 0 4px 0; }
.cart-desc { font-size:12px; color:#666; margin:0 0 8px 0; }
.cart-bottom { display:flex; justify-content:space-between; align-items:center; }
.quantity { display:flex; align-items:center; gap:8px; border:3px solid var(--black); border-radius:20px; padding:6px 10px; }
.qty-btn { width:28px; height:28px; background:var(--black); color:white; border:none; border-radius:8px; font-size:16px; font-weight:800; cursor:pointer; }
.qty-num { font-weight:800; min-width:20px; text-align:center; font-size:16px; }
.cart-price { font-size:20px; font-weight:800; color:#FF3B30; }
.summary { border-top:3px solid #E0E0E0; padding-top:16px; margin-top:16px; }
.summary-row { display:flex; justify-content:space-between; margin-bottom:12px; font-size:14px; }
.summary-label { color:#666; }
.summary-value { font-weight:800; }
.buy-btn { width:100%; background:var(--black); color:white; border:4px solid var(--black); border-radius:40px; padding:16px; font-size:18px; font-weight:800; cursor:pointer; box-shadow:0 8px 0 rgba(0,0,0,0.15); margin-top:16px; transition:transform .2s; }
.buy-btn:hover { transform:translateY(-4px); }

.empty-state { text-align:center; padding:40px 20px; color:#666; font-weight:800; font-size:16px; }

/* BACK BUTTON */
.back-btn { display:none; align-items:center; gap:8px; background:var(--black); color:white; border:4px solid var(--black); border-radius:20px; padding:10px 20px; font-weight:800; font-size:16px; cursor:pointer; box-shadow:0 8px 0 rgba(0,0,0,0.15); margin-bottom:24px; transition:transform .2s; width:fit-content; }
.back-btn:hover { transform:translateY(-4px); }
.back-btn.show { display:flex; }
</style>
</head>
<body>

<!-- NAVBAR - STICKY -->
<nav class="navbar">
  <div class="nav-inner">
    <div class="logo">StyleHub</div>
    <div class="search-box"><input type="text" id="searchInput" placeholder="Search..."></div>
    <div class="nav-icons">
      <div class="icon-btn" onclick="showLikedProducts()"><i class="fas fa-heart"></i><span id="liked-count" class="badge">0</span></div>
      <div class="icon-btn" onclick="openCartModal()"><i class="fas fa-shopping-cart"></i><span id="cart-count" class="badge">0</span></div>
    </div>
  </div>
</nav>

<!-- CART MODAL -->
<div class="modal" id="cartModal">
  <div class="modal-content">
    <div class="modal-header">
      <h2 class="modal-title">My Cart</h2>
      <div class="close-btn" onclick="closeCartModal()">×</div>
    </div>
    <div class="promo"><div class="check">✓</div><span>Promocode T40U67</span></div>
    <div id="cartContainer"></div>
    <div class="summary">
      <div class="summary-row"><span class="summary-label">Subtotal</span><span class="summary-value" id="subtotal">₹0</span></div>
      <div class="summary-row"><span class="summary-label">Delivery</span><span class="summary-value">₹60</span></div>
      <div class="summary-row"><span class="summary-label">Discounts 30%</span><span class="summary-value" id="discount">-₹0</span></div>
    </div>
    <button class="buy-btn" id="buyBtn">BUY FOR ₹0</button>
  </div>
</div>

<div class="container">
  <!-- BACK BUTTON -->
  <button class="back-btn" id="backBtn" onclick="goBack()">
    <i class="fas fa-arrow-left"></i> Back
  </button>
  
  <!-- HOME SECTIONS -->
  <div class="sections" id="homeSections">
    <div class="section home-section">
      <div class="home-header"><h1>Hi, Jane</h1></div>
      <div class="quick-cards">
        <div class="quick-card lime" onclick="showSavedLooks()">Saved Looks</div>
        <div class="quick-card lilac" onclick="showAllProducts()">Just For You</div>
      </div>
    </div>
  </div>

  <!-- SHOP BY CATEGORY -->
  <div class="categories" id="categoriesSection">
    <h2 class="section-title" style="font-size:28px;">Shop by Category</h2>
    <div class="category-grid">
      <div class="cat-card" onclick="filterAndScroll('men')">
        <img src="asset/shirt-and-tie-svgrepo-com.svg" alt="Men" class="cat-icon">
        <div>Men</div>
      </div>
      <div class="cat-card" onclick="filterAndScroll('women')">
        <img src="asset/dress-svgrepo-com.svg" alt="Women" class="cat-icon">
        <div>Women</div>
      </div>
      <div class="cat-card" onclick="filterAndScroll('kids')">
        <img src="asset/baby-clothes-1-svgrepo-com.svg" alt="Kids" class="cat-icon">
        <div>Kids</div>
      </div>
      <div class="cat-card" onclick="filterAndScroll('footwear')">
        <img src="asset/stilletos-svgrepo-com.svg" alt="Footwear" class="cat-icon">
        <div>Footwear</div>
      </div>
      <div class="cat-card" onclick="filterAndScroll('hand bags')">
        <img src="asset/purse-svgrepo-com.svg" alt="Hand Bags" class="cat-icon">
        <div>Hand Bags</div>
      </div>
      <div class="cat-card" onclick="filterAndScroll('makeup')">
        <img src="asset/lipstick-makeup-svgrepo-com.svg" alt="Makeup" class="cat-icon">
        <div>Makeup</div>
      </div>
      <div class="cat-card" onclick="filterAndScroll('skincare')">
        <img src="asset/cream-lotion-svgrepo-com.svg" alt="Skincare" class="cat-icon">
        <div>Skincare</div>
      </div>
      <div class="cat-card" onclick="filterAndScroll('accessories')">
        <img src="asset/necklace-svgrepo-com.svg" alt="Accessories" class="cat-icon">
        <div>Accessories</div>
      </div>
    </div>
  </div>

  <!-- FILTERS -->
  <div class="filters" id="filtersSection">
    <button class="filter-btn active" onclick="filterProducts('all')">ALL</button>
    <button class="filter-btn" onclick="filterProducts('men')">MEN</button>
    <button class="filter-btn" onclick="filterProducts('women')">WOMEN</button>
    <button class="filter-btn" onclick="filterProducts('kids')">KIDS</button>
  </div>

  <!-- PRODUCTS GRID -->
  <div id="products-section">
    <div id="products-grid"></div>
  </div>
</div>

<script>
// === Global variables ===
let allProducts = [], cart = [], liked = [], saved = [], currentFilter = 'all', currentView = 'all';

// === Fetch products from JSON ===
fetch('asset/shopping.json')
  .then(response => response.json())
  .then(data => {
    allProducts = data.map((p, index) => {
      const price = parseFloat(p.Price.replace('₹','')) || 0;
      const oldPrice = Math.round(price * 1.3); // +30% for realistic cut price
      return {
        id: index + 1,
        name: p["Item Name"],
        desc: p.Description,
        oldPrice,
        newPrice: price,
        img: p.Image_URL,
        cat: p.Category ? p.Category.toLowerCase().trim() : ''
      };
    });
    renderAllProducts();
    updateBadges();
  })
  .catch(err => console.error("Error loading JSON:", err));

// === Render Product Card ===
function renderProductCard(p, container){
  const div = document.createElement("div");
  div.className = "product-card";
  const isSaved = saved.includes(p.id);
  const isLiked = liked.includes(p.id);
  div.innerHTML = `
    <div class="product-ribbon">SALE</div>
    <div class="product-actions">
      <div class="action-icon ${isSaved?'active':''}" onclick="toggleSave(${p.id})" title="Save">
        <i class="fas fa-bookmark"></i>
      </div>
      <div class="action-icon ${isLiked?'active':''}" onclick="toggleLike(${p.id})" title="Like">
        <i class="fas fa-heart"></i>
      </div>
    </div>
    <div class="product-content">
      <img src="${p.img}" alt="${p.name}" class="product-img">
      <div class="product-info">
        <h3 class="product-title">${p.name}</h3>
        <p class="product-desc">${p.desc}</p>
        <div class="product-price">
          <span class="price-old">₹${p.oldPrice}</span>
          <span class="price-new">₹${p.newPrice}</span>
        </div>
        <button class="add-btn" onclick="addToCart(${p.id})">+</button>
      </div>
    </div>`;
  container.appendChild(div);
}

// === Render All Products ===
function renderAllProducts(list=null){
  const grid = document.getElementById("products-grid");
  grid.innerHTML = '';
  let products;
  
  if(list){
    products = list;
  } else if(currentView === 'liked'){
    products = allProducts.filter(p => liked.includes(p.id));
  } else if(currentView === 'saved'){
    products = allProducts.filter(p => saved.includes(p.id));
  } else if(currentFilter === 'all'){
    products = allProducts;
  } else {
    products = allProducts.filter(p => p.cat === currentFilter);
  }
  
  if(products.length === 0){
    grid.innerHTML = '<div class="empty-state">No products found</div>';
  } else {
    products.forEach(p => renderProductCard(p, grid));
  }
}

// === Show Saved Products ===
function showSavedLooks(){
  currentView = 'saved';
  currentFilter = 'all';
  document.getElementById('homeSections').style.display = 'none';
  document.getElementById('categoriesSection').style.display = 'none';
  document.getElementById('filtersSection').style.display = 'none';
  renderAllProducts();
  document.getElementById('backBtn').style.display = 'block';
  document.getElementById('products-section').scrollIntoView({behavior:'smooth'});
}

// === Show Liked Products ===
function showLikedProducts(){
  currentView = 'liked';
  currentFilter = 'all';
  document.getElementById('homeSections').style.display = 'none';
  document.getElementById('categoriesSection').style.display = 'none';
  document.getElementById('filtersSection').style.display = 'none';
  renderAllProducts();
  document.getElementById('backBtn').style.display = 'block';
  document.getElementById('products-section').scrollIntoView({behavior:'smooth'});
}

// === Show All Products (Just For You) ===
function showAllProducts(){
  currentView = 'all';
  currentFilter = 'all';
  document.getElementById('homeSections').style.display = 'grid';
  document.getElementById('categoriesSection').style.display = 'block';
  document.getElementById('filtersSection').style.display = 'block';
  document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
  document.querySelector('.filter-btn[onclick="filterProducts(\'all\')"]')?.classList.add('active');
  renderAllProducts();
  document.getElementById('backBtn').style.display = 'none';
  document.getElementById('products-section').scrollIntoView({behavior:'smooth'});
}

// === Save / Like ===
function toggleSave(id){
  saved = saved.includes(id) ? saved.filter(x => x !== id) : [...saved, id];
  renderAllProducts();
  updateBadges();
}

function toggleLike(id){
  liked = liked.includes(id) ? liked.filter(x => x !== id) : [...liked, id];
  renderAllProducts();
  updateBadges();
}

// === Cart ===
function renderCart(){
  const c = document.getElementById("cartContainer");
  c.innerHTML = cart.length === 0 ? '<div class="empty-state">Cart is empty!</div>' : '';
  cart.forEach(item => {
    const p = allProducts.find(x => x.id === item.id);
    if(!p) return;
    const div = document.createElement("div");
    div.className = "cart-product";
    div.innerHTML = `<img src="${p.img}" class="cart-img">
      <div class="cart-info">
        <h3 class="cart-title">${p.name}</h3>
        <p class="cart-desc">${p.desc}</p>
        <div class="cart-bottom">
          <div class="quantity">
            <button class="qty-btn" onclick="updateQty(${item.id},-1)">-</button>
            <span class="qty-num">${item.qty}</span>
            <button class="qty-btn" onclick="updateQty(${item.id},1)">+</button>
          </div>
          <div class="cart-price">₹${item.qty * p.newPrice}</div>
        </div>
      </div>`;
    c.appendChild(div);
  });
  updateSummary();
  updateBadges();
}

function addToCart(id){
  const e = cart.find(x => x.id === id);
  if(e){ e.qty++; } else { cart.push({id, qty:1}); }
  renderCart();
  document.getElementById('backBtn').style.display = 'block'; // show back btn after adding
}

function updateQty(id, ch){
  const i = cart.find(x => x.id === id);
  if(i){
    i.qty += ch;
    if(i.qty < 1) cart = cart.filter(x => x.id !== id);
  }
  renderCart();
}

function updateSummary(){
  const sub = cart.reduce((s, i) => {
    const p = allProducts.find(x => x.id === i.id);
    return s + (p ? i.qty * p.newPrice : 0);
  }, 0);
  const disc = Math.round(sub * 0.3);
  document.getElementById("subtotal").innerText = `₹${sub}`;
  document.getElementById("discount").innerText = `-₹${disc}`;
  document.getElementById("buyBtn").innerText = `BUY FOR ₹${sub + 60 - disc}`;
}

function updateBadges(){
  const cartTotal = cart.reduce((s, i) => s + i.qty, 0);
  document.getElementById("cart-count").innerText = cartTotal;
  document.getElementById("liked-count").innerText = liked.length;
}

// === Modal ===
function openCartModal(){
  renderCart();
  document.getElementById('cartModal').classList.add('show');
  document.getElementById('backBtn').style.display = 'block';
}
function closeCartModal(){
  document.getElementById('cartModal').classList.remove('show');
}

// === Filtering / Categories ===
function filterProducts(c){
  currentView = 'all';
  currentFilter = c;
  document.getElementById('homeSections').style.display = 'grid';
  document.getElementById('categoriesSection').style.display = 'block';
  document.getElementById('filtersSection').style.display = 'block';
  document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
  document.querySelector(`.filter-btn[onclick="filterProducts('${c}')"]`)?.classList.add('active');
  renderAllProducts();
  document.getElementById('backBtn').style.display = 'none';
}

function filterAndScroll(c){
  currentView = 'all';
  currentFilter = c;
  document.getElementById('homeSections').style.display = 'none';
  document.getElementById('categoriesSection').style.display = 'none';
  document.getElementById('filtersSection').style.display = 'none';
  renderAllProducts();
  document.getElementById('products-section').scrollIntoView({behavior:'smooth'});
  document.getElementById('backBtn').style.display = 'block';
}

// === Search ===
document.getElementById('searchInput').addEventListener('input', function(){
  const query = this.value.toLowerCase().trim();
  const backBtn = document.getElementById('backBtn');

  if(!query){
    currentView = 'all';
    currentFilter = 'all';
    document.getElementById('homeSections').style.display = 'grid';
    document.getElementById('categoriesSection').style.display = 'block';
    document.getElementById('filtersSection').style.display = 'block';
    backBtn.style.display = 'none';
    renderAllProducts();
    return;
  }

  currentView = 'search';
  document.getElementById('categoriesSection').style.display = 'none';
  backBtn.style.display = 'block';

  const filtered = allProducts.filter(p =>
    p.name.toLowerCase().includes(query) ||
    p.desc.toLowerCase().includes(query) ||
    p.cat.toLowerCase().includes(query)
  );

  renderAllProducts(filtered);
  document.getElementById('products-section').scrollIntoView({behavior:'smooth'});
});

// === Back Button ===
document.getElementById('backBtn').addEventListener('click', () => {
  currentView = 'all';
  currentFilter = 'all';
  document.getElementById('homeSections').style.display = 'grid';
  document.getElementById('categoriesSection').style.display = 'block';
  document.getElementById('filtersSection').style.display = 'block';
  document.getElementById('searchInput').value = '';
  document.getElementById('backBtn').style.display = 'none';
  renderAllProducts();
  document.getElementById('products-section').scrollIntoView({behavior:'smooth'});
});

// === Close modal when clicking outside ===
document.getElementById('cartModal').addEventListener('click', function(e){
  if(e.target === this) closeCartModal();
});
</script>
